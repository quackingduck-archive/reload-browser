<script src="socket.io.js"></script>

<script>
// window.probes=true

// Will reconnect if socket is closed at other end.
// todo: pick a different port
var socket = io.connect('http://localhost:35729')

// pulls reload events
socket.on('reload', function (data) {
  probe("reload event", data)

  // Reloads active tab in active window. Might make sense to reload active
  // tab in all windows: chrome.tabs.query({active: true})
  chrome.tabs.reload()
});

function probe() { if (window.probes) console.log(arguments) }
</script>
